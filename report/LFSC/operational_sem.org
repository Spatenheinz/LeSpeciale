#+begin_export latex
\begin{figure}[h!]
\begin{equation*}
\inference[CST-O ]{ }
{ \judge{1}{c}{c}{1} }
\qquad
\inference[VAR-O ]{ }
{ \judge{1}{x}{x}{1} }
\qquad
\inference[NUM-O ]{ }
{ \judge{1}{r}{r}{1} }
\end{equation*}

\begin{equation*}
\inference[CST-APP ]{ \forall i \in \{ 1, \dots, n\} . (\judge{i}{S_i}{S_i'}{i+1}) }
{ \judge{1}{(c \; S_1 \dots S_n)}{(c \; S_1' \dots S_n')}{n+1} }
\end{equation*}

\begin{equation*}
\inference[LET-O ]{ \judge{1}{S}{S'}{2} & \judge{2}{\subst{S'}{x}{T}}{T'}{3} }
{ \judge{1}{(\mathbf{let}\; x \; S \; T)}{T'}{3} }
\qquad
\inference[DO-O ]{ \judge{1}{S}{S'}{2} & \judge{2}{T}{T'}{3} }
{ \judge{1}{(\mathbf{do}\; S \; T)}{T'}{3} }
\end{equation*}
\begin{equation*}
\inference[IFEQUAL-T ]{ \judge{1}{S_1}{S_1'}{2} & \judge{2}{S_2}{S_2'}{3} & S_1' \equiv_{\beta\eta} S_2' & \judge{3}{T_1}{T_2'}{4} }
{ \judge{1}{(\mathbf{ifequal}\; S_1 \; S_2 \; T_1 \; T_2)}{T_2'}{4} }
\end{equation*}
\begin{equation*}
\inference[IFEQUAL-F ]{ \judge{1}{S_1}{S_1'}{2} & \judge{2}{S_2}{S_2'}{3} & S_1' \not\equiv_{\beta\eta} S_2' & \judge{3}{T_1}{T_2'}{4} }
{ \judge{1}{(\mathbf{ifequal}\; S_1 \; S_2 \; T_1 \; T_2)}{T_2'}{4} }
\end{equation*}

\begin{equation*}
\inference[MATCH-O ]{
\judge{1}{S}{(c \; S_1 \dots S_m)}{2}
& \exists i. P_i = (c x_1 \dots x_m)
& \judge{2}{\lbrack S_1'/x_1,\dots, S_m/x_1 \rbrack T_i}{T'}{3} }
{ \judge{1}{(\mathbf{match} \; S \; (P_1 T_1) \dots (P_n T_n) )}{T'}{3} }
\end{equation*}
\begin{multline*}
\inference[FUN-APP ]{
\forall i \in \{ 1, \dots, n\}. (\Delta \vdash \judge{i}{S_i}{S_i'}{i+1})\\
& (f (x_1 : A_1 \dots x_n : A_n) : B = T) \in \Delta
& \Delta \vdash \judge{n+1}{\lbrack S_1'/x_1, \dots S_n'/x_n \rbrack T }{T'}{n+2}
}
{ \judge{1}{(f \; S_1 \dots S_n)}{T'}{n+2} }
\end{multline*}

\begin{equation*}
\inference[BINOP-O ]{\judge{1}{S}{r_1}{2} & \judge{2}{T}{r_2}{3} & r = r_1 \oplus r_2 }
{\judge{1}{S \oplus T}{r}{3} }\oplus \in \{+, *, / \}
\end{equation*}

\begin{equation*}
\inference[NEG-O ]{\judge{1}{S}{r}{2} }
{\judge{1}{- S}{r}{2} }
\qquad
\inference[ZTOQ-O ]{\judge{1}{S}{z}{2} & r = z/z }
{\judge{1}{\mathbf{ztoq}\; S}{r}{2} }
\end{equation*}

\begin{equation*}
\inference[IFNEG--T ]{ \judge{1}{S}{r}{2} &  r < 0 & \judge{2}{T}{T'}{3} }
{ \judge{1}{(\mathbf{ifneg} \; S \; T \; U)}{T'}{3} }
\qquad
\inference[IFNEG--F ]{ \judge{1}{S}{r}{2} &  r \ge 0 & \judge{2}{U}{U'}{3} }
{ \judge{1}{(\mathbf{ifneg} \; S \; T \; U)}{U'}{3} }
\end{equation*}
\begin{equation*}
\inference[IFZERO--T ]{ \judge{1}{S}{r}{2} &  r = 0 & \judge{2}{T}{T'}{3} }
{ \judge{1}{(\mathbf{ifzero} \; S \; T \; U)}{T'}{3} }
\qquad
\inference[IFZERO--F ]{ \judge{1}{S}{r}{2} &  r \ne 0 & \judge{2}{U}{U'}{3} }
{ \judge{1}{(\mathbf{ifzero} \; S \; T \; U)}{U'}{3} }
\end{equation*}

\begin{equation*}
\inference[IFMARKED--T ]{ \judge{1}{S}{x}{2} &  \sigma_2 x & \judge{2}{T}{T'}{3} }
{ \judge{1}{(\mathbf{ifmarked} \; S \; T \; U)}{T'}{3} }
\qquad
\inference[IFMARKED--F ]{ \judge{1}{S}{x}{2} &  \neg \sigma_2 x & \judge{2}{U}{U'}{3} }
{ \judge{1}{(\mathbf{ifmarked} \; S \; T \; U)}{U'}{3} }
\end{equation*}
\begin{equation*}
\inference[MARKVAR-O ]{ \judge{1}{S}{x}{2} }
{ \judge{1}{(\mathbf{markvar} \; S)}{x}{2}\lbrack x \mapsto \neg \sigma_2 x \rbrack }
\end{equation*}
\caption{Operational semantics for side conditions}
\end{figure}
#+end_export
Errors are not included in the operational semantics. Errors might occur when *fail* is evaluated, a match does not match any pattern, if *markvar* or *ifmarked* does not evaluate to a variable, if division by 0 is reached or a free identifier is found.
